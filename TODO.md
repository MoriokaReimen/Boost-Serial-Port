+ stop async read and prevent async write when there is error (or maybe throw when user tries to write when there's error?)
+ make oneliners inline
+ handle eof error as success
+ block read till eof
